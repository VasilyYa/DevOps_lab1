# Лаб1. Скрипт запроса погоды

Написать bash-скрипт, который принимает в качестве входящего параметра город, 
и выводит на html-страницу температуру и влажность в текущий день в этом городе.
В качестве веб-сервера использовать nginx.
Скрипт запускать по крону раз в минуту, вывод сохранять в index.html дефолтного сайта.
Источник данных о погоде: https://github.com/chubin/wttr.in (брать в json формате)
Использовать библиотеку jq для работы с json.

# Лог выполнения задания:

1. Устанавливаем nginx на ubuntu-сервере (ip сервера 82.146.50.10):
sudo apt update && sudo apt install -y nginx
Проверяем работу nginx на порту 80: "netstat -tulpn", проверяем открытие страницы дефолту в браузере: http://82.146.50.10/ (либо curl 82.146.50.10). 
Согласно конфигу /etc/nginx/sites-enabled/default открывается одна из дефолтных index-страниц /var/www/html/index.nginx-debian.html
Отправлять данные о погоде будем на страницу index.html.

2. Пишем скрипт, выполняющий всю логику.
Для однозначности выбора интерпретатора в скрипте через шебанг задаем bash (для удобства отладки можно с ключем -x).
Код скрипта см. файл.
Файл необходимо сделать исполняемым: chmod -x /home/$USER/lab1-script.sh

3. Выдаем права на запись файла /var/www/html/index.html для нужного юзера
sudo chown :dev5 /var/www/html/index.html (смена группы у файла)
sudo chmod g+w /var/www/html/index.html (выдача прав группе на запись файла)

4. Настраиваем запуск скрипта по CRON-у для нужного юзера
crontab -e :
* * * * * /home/dev5/lab1/lab1_script.sh > /var/www/html/index.html 2>/home/dev5/lab1/error.log

5. По хорошему чтобы страница обновлялась при повторных запросах из браузера - запретить браузеру кэшировать, добавив в секцию location веб-сервера nginx директивы:
    # Заголовки, запрещающие кэширование
    add_header Cache-Control "no-store, no-cache, must-revalidate, proxy-revalidate, max-age=0";
    add_header Pragma "no-cache";
    add_header Expires 0;  

6. Результат тут http://82.146.50.10/
